"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const _1 = require(".");
class Base {
    constructor(server, api, validate, token) {
        this.server = server;
        this.api = api;
        this.validate = validate;
        this.token = token;
        this.isPlural = true;
    }
    val(d) {
        var _a;
        if (!this.validate)
            return;
        const valid = this.validate(d);
        if (valid)
            return;
        // console.log(this.validate.errors);
        const error = (this.validate.errors && this.validate.errors.length)
            ? this.validate.errors[0]
            : null;
        throw error
            ? new _1.ValidationError((_a = error.message) !== null && _a !== void 0 ? _a : 'Validation Error', error.keyword === 'required' ? error.params.missingProperty : error.instancePath.substr(1))
            : new Error('Unknown validation error');
    }
}
exports.default = Base;
